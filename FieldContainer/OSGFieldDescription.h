/*---------------------------------------------------------------------------*\
 *                                OpenSG                                     *
 *                                                                           *
 *                                                                           *
 *                         Copyright 2000 by OpenSG Forum                    *
 *                                                                           *
 *          contact: {reiners|vossg}@igd.fhg.de, jbehr@zgdv.de               *
 *                                                                           *
\*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*\
 *                                License                                    *
 *                                                                           *
 *                                                                           *
 *                                                                           *
 *                                                                           *
 *                                                                           *
\*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*\
 *                                Changes                                    *
 *                                                                           *
 *                                                                           *
 *                                                                           *
 *                                                                           *
 *                                                                           *
 *                                                                           *
\*---------------------------------------------------------------------------*/


#ifndef _OSGFIELDDESCRIPTION_CLASS_DECLARATION_H_
#define _OSGFIELDDESCRIPTION_CLASS_DECLARATION_H_
#ifdef __sgi
#pragma once
#endif

//---------------------------------------------------------------------------
//  Includes
//---------------------------------------------------------------------------

#include <OSGFieldDataType.h>
#include <OSGString.h>
#include <OSGFieldContainer.h>
#include <OSGFieldType.h>

OSG_BEGIN_NAMESPACE

//---------------------------------------------------------------------------
//  Forward References
//---------------------------------------------------------------------------

class OSGField;

//---------------------------------------------------------------------------
//   Types
//---------------------------------------------------------------------------

typedef OSGField * (OSGFieldContainer::* OSGFieldAccessMethod)(void); 

//---------------------------------------------------------------------------
//  Class
//---------------------------------------------------------------------------

/*! \ingroup baselib
 *  \brief Brief
 *
 *  detailed
 */


class OSGFieldDescription 
{
	friend class OSGFieldContainer;

  public:
    
    //-----------------------------------------------------------------------
    //   enums                                                               
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   types                                                               
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   class functions                                                     
    //-----------------------------------------------------------------------

	//-----------------------------------------------------------------------
    //   instance functions                                                  
    //-----------------------------------------------------------------------


    /** Default Constructor */
    OSGFieldDescription(const OSGFieldType         &fieldType, 
                        const char                 *name, 
                        const OSGUInt32             fieldId,
                        const OSGBitVector          fieldMask,
                        const OSGBool               internal,
                              OSGFieldAccessMethod  accessMethod,
                        const char                 *defaultValue = 0);
    
    /** Copy Constructor */
    OSGFieldDescription (const OSGFieldDescription &obj);
    
    /** Destructor */
    ~OSGFieldDescription (void);
    
    /** get method for attribute dataType */
    OSGUInt32 getTypeId (void)  const { return _fieldType.getTypeId(); }
    
    /** get method for attribute name */
	const char * name (void) { return _name.str(); }
    
    /** get method for attribute defaultValue */
    const char * defaultValue (void) { return _name.str(); }

    OSGBitVector getFieldMask(void);
    OSGUInt32    getFieldId  (void);
    
    /*------------------------- your_category -------------------------------*/


    /*------------------------- your_operators ------------------------------*/


    /*------------------------- assignment ----------------------------------*/
    
	void print(void) const;
	
    /*------------------------- comparison ----------------------------------*/

	OSGBool valid(void) const
        { return (_name.length()) ? true : false; } 


  protected:


    //-----------------------------------------------------------------------
    //   enums                                                               
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   types                                                               
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   class variables                                                     
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   class functions                                                     
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   instance variables                                                  
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   instance functions                                                  
    //-----------------------------------------------------------------------

     
	OSGField *getFieldValue (OSGFieldContainer &fieldContainer);


  private:
 
    //-----------------------------------------------------------------------
    //   enums                                                               
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   types                                                               
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   friend classes                                                      
    //-----------------------------------------------------------------------

    friend class OSGFieldContainerPtr;

    //-----------------------------------------------------------------------
    //   friend functions                                                    
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   class variables                                                     
    //-----------------------------------------------------------------------

    const OSGFieldType &_fieldType;

    OSGUInt32            _fieldId;
    OSGUInt32            _fieldMask;
    
    OSGBool              _internal;

	OSGString            _name;

	OSGFieldAccessMethod _accessMethod;

	OSGString            _defaultValue;

	//-----------------------------------------------------------------------
    //   class functions                                                     
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   instance variables                                                  
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    //   instance functions                                                  
    //-----------------------------------------------------------------------

	// prohibit default functions (move to 'public' if you need one)

 
};

//---------------------------------------------------------------------------
//   Exported Types
//---------------------------------------------------------------------------

// class pointer

typedef OSGFieldDescription* OSGFieldDescriptionP;

OSG_END_NAMESPACE

#endif // OSGFIELDDESCRIPTION_CLASS_DECLARATION
