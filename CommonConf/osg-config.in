#!/bin/sh

prefix=@am_gdz_install_dir@

system_win=@ac_gdz_system_win_e15@
system_unix=@ac_gdz_system_unix_e15@

have_glut=@ac_gdz_have_glut_e15@
have_qt=@ac_gdz_have_qt_e15@
have_tif=@ac_gdz_have_tif_e15@
have_jpg=@ac_gdz_have_jpg_e15@
have_png=@ac_gdz_have_png_e15@
have_mng=@ac_gdz_have_mng_e15@
have_gif=@ac_gdz_have_gif_e15@  

if test "$system_win" = "yes"; then
	prefix=`cygpath -w $prefix`
fi

exec_prefix=${prefix}
exec_prefix_set=no

if test "$system_win" = "yes"; then
    linkdir_pre="-LIBPATH:\""
    linkdir_suf="\""

    incdir_pre="-I\""
    incdir_suf="\""

    link_pre=
    link_suf=.lib
else
    linkdir_pre=-L
    linkdir_suf=

    incdir_pre=-I
    incdir_suf=

    link_pre=-l
    link_suf=
fi

link_flags=@am_gdz_link_flags@
link_flags_opt=@am_gdz_link_flags_opt@
link_flags_dbg=@am_gdz_link_flags_dbg@

base_libs=@ac_gdz_base_system_libs_e15@

win_sys_libs="opengl32.lib glu32.lib gdi32.lib"
unix_sys_libs="-lGLU -lGL -lXmu -lXi -lXt -lX11"

glut_libs=@ac_gdz_glut_lib_e15@
lib_glut_path=@ac_gdz_glut_libdir_e15@
inc_glut_path=@ac_gdz_glut_incdir_e15@

qt_libs=@ac_gdz_qt_lib_e15@
lib_qt_path=@ac_gdz_qt_libdir_e15@
inc_qt_path=@ac_gdz_qt_incdir_e15@

tif_libs=@ac_gdz_tif_lib_e15@
lib_tif_path=@ac_gdz_tif_libdir_e15@
inc_tif_path=@ac_gdz_tif_incdir_e15@

jpg_libs=@ac_gdz_jpg_lib_e15@
lib_jpg_path=@ac_gdz_jpg_libdir_e15@
inc_jpg_path=@ac_gdz_jpg_incdir_e15@

png_libs=@ac_gdz_png_lib_e15@
lib_png_path=@ac_gdz_png_libdir_e15@
inc_png_path=@ac_gdz_png_incdir_e15@

mng_libs=@ac_gdz_mng_lib_e15@
lib_mng_path=@ac_gdz_mng_libdir_e15@
inc_mng_path=@ac_gdz_mng_incdir_e15@

gif_libs=@ac_gdz_gif_lib_e15@
lib_gif_path=@ac_gdz_gif_libdir_e15@
inc_gif_path=@ac_gdz_gif_incdir_e15@

image_libs=
image_libs_path=
image_incs_path=
image_defs=

if test "$system_win" = "yes"; then
    sys_libs=$win_sys_libs
else
    sys_libs=$unix_sys_libs
fi;

if test "$have_tif" = "yes"; then
    image_libs="$image_libs $tif_libs"

    if test "yes$lib_tif_path" != "yes"; then
        image_libs_path="$image_libs_path $linkdir_pre$lib_tif_path$linkdir_suf"
    fi
    if test "yes$inc_tif_path" != "yes"; then
        image_incs_path="$image_incs_path $incdir_pre$inc_tif_path$incdir_suf"
    fi
    image_defs="$image_defs -DOSG_WITH_TIF"
fi
if test "$have_jpg" = "yes"; then
    image_libs="$image_libs $jpg_libs"
    if test "yes$lib_jpg_path" != "yes"; then
        image_libs_path="$image_libs_path $linkdir_pre$lib_jpg_path$linkdir_suf"
    fi
    if test "yes$inc_jpg_path" != "yes"; then
        image_incs_path="$image_incs_path $incdir_pre$inc_jpg_path$incdir_suf"
    fi
    image_defs="$image_defs -DOSG_WITH_JPG"
fi
if test "$have_png" = "yes"; then
    image_libs="$image_libs $png_libs"
    if test "yes$lib_png_path" != "yes"; then
        image_libs_path="$image_libs_path $linkdir_pre$lib_png_path$linkdir_suf"
    fi
    if test "yes$inc_png_path" != "yes"; then
        image_incs_path="$image_incs_path $incdir_pre$inc_png_path$incdir_suf"
    fi
    image_defs="$image_defs -DOSG_WITH_PNG"
fi
if test "$have_mng" = "yes"; then
    image_libs="$image_libs $mng_libs"
    if test "yes$lib_mng_path" != "yes"; then
        image_libs_path="$image_libs_path $linkdir_pre$lib_mng_path$linkdir_suf"
    fi
    if test "yes$inc_mng_path" != "yes"; then
        image_incs_path="$image_incs_path $incdir_pre$inc_mng_path$incdir_suf"
    fi
    image_defs="$image_defs -DOSG_WITH_MNG"
fi
if test "$have_gif" = "yes"; then
    image_libs="$image_libs $gif_libs"
    if test "yes$lib_gif_path" != "yes"; then
        image_libs_path="$image_libs_path $linkdir_pre$lib_gif_path$linkdir_suf"
    fi
    if test "yes$inc_gif_path" != "yes"; then
        image_incs_path="$image_incs_path $incdir_pre$inc_gif_path$incdir_suf"
    fi
    image_defs="$image_defs -DOSG_WITH_GIF"
fi

usage()
{
    cat <<EOF
Usage: osg-config OPTIONS [LIBRARIES]
Options:
    [--prefix[=DIR]]
    [--exec-prefix[=DIR]]
    [--version]
    [--libs]
    [--cflags]
    [--lflags]
    [--opt]
    [--dbg]
Libraries:
    Base
    System
    Win32
    X
    GLUT
    QT
EOF
    exit $1
}

if test $# -eq 0; then
    usage 1 1>&2
fi

lib_base=yes

valid_print=no
lib_suf=dbg

while test $# -gt 0; do
  case "$1" in
  -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) optarg= ;;
  esac

  case $1 in
    --prefix=*)
      prefix=$optarg
      if test $exec_prefix_set = no ; then
        exec_prefix=$optarg
      fi
      ;;
    --prefix)
      echo_prefix=yes
      valid_print=yes
      ;;
    --exec-prefix=*)
      exec_prefix=$optarg
      exec_prefix_set=yes
      ;;
    --exec-prefix)
      echo_exec_prefix=yes
      valid_print=yes
      ;;
    --version)
#Set
      echo 0.9
      valid_print=yes
      ;;
    --cflags)
      echo_cflags=yes
      valid_print=yes
      ;;
    --lflags)
      echo_lflags=yes
      valid_print=yes
      ;;
    --libs)
      echo_libs=yes
      valid_print=yes
      ;;
    --opt)
      lib_suf=opt
      ;;
    --dbg)
      lib_suf=dbg
      ;;
    Base)
      lib_Base=yes
      ;;
    System)
      lib_Base=yes
      lib_System=yes
      ;;
    Win32)
      lib_Base=yes
      lib_System=yes
      lib_Win32=yes
      ;;
    X)
      lib_Base=yes
      lib_System=yes
      lib_X=yes
      ;;
    GLUT)
      lib_Base=yes
      lib_System=yes
      lib_GLUT=yes
      ;;
    QT)
      lib_Base=yes
      lib_System=yes
      if test "$system_win" = "yes"; then
        lib_Win32=yes
      else
        lib_X=yes
      fi;
      lib_QT=yes
      ;;
    *)
      usage 1 1>&2
      ;;
  esac
  shift
done

if test "$valid_print" = "no"; then
    usage 1 1>&2
    exit
fi;

if test "$echo_prefix" = "yes"; then
    echo $prefix
fi

if test "$echo_exec_prefix" = "yes"; then
    echo $exec_prefix
fi



opensg_libs=
system_libs=

system_libs_path=
system_incs_path=
system_defs=

if test "$lib_suf" = "dbg"; then
    link_flags="$link_flags $link_flags_dbg"
else
    link_flags="$link_flags $link_flags_opt"
fi

sys_cflags=@am_gdz_system_flags@
sys_cflags_dbg=@am_gdz_system_flags_dbg@
sys_cflags_opt=@am_gdz_system_flags_opt@

if test "$lib_suf" = "dbg"; then
    sys_cflags="$sys_cflags $sys_cflags_dbg"
else
    sys_cflags="$sys_cflags $sys_cflags_opt"
fi

if test "$lib_QT" = "yes"; then
    if test "$have_qt" = "yes"; then
        opensg_libs="$opensg_libs ${link_pre}OSGWindowQT${link_suf}"
        system_libs="$system_libs $qt_libs"
        if test "yes$lib_qt_path" != "yes"; then
            system_libs_path="$system_libs_path $linkdir_pre$lib_qt_path$linkdir_suf"
        fi
        if test "yes$inc_qt_path" != "yes"; then
            system_incs_path="$system_incs_path $incdir_pre$inc_qt_path$incdir_suf"
        fi
        system_defs="$system_defs -DOSG_WITH_QT"
    else
        echo "Warning QT not configured, ignoring request"
    fi;
fi;

if test "$lib_GLUT" = "yes"; then
    if test "$have_glut" = "yes"; then
        opensg_libs="$opensg_libs ${link_pre}OSGWindowGLUT${link_suf}"
        system_libs="$system_libs $glut_libs"
        if test "yes$lib_glut_path" != "yes"; then
            system_libs_path="$system_libs_path $linkdir_pre$lib_glut_path$linkdir_suf"
        fi
        if test "yes$inc_glut_path" != "yes"; then
            system_incs_path="$system_incs_path $incdir_pre$inc_glut_path$incdir_suf"
        fi
        system_defs="$system_defs -DOSG_WITH_GLUT"
    else
        echo "Warning GLUT not configured, ignoring request"
    fi;
fi;

if test "$lib_X" = "yes"; then
    if test "$system_unix" = "yes"; then
        opensg_libs="$opensg_libs ${link_pre}OSGWindowX${link_suf}"
    else
        echo "Warning X not available on win32 plattforms, ignoring request"
    fi;
fi;

if test "$lib_Win32" = "yes"; then
    if test "$system_win" = "yes"; then
        opensg_libs="$opensg_libs ${link_pre}OSGWindowWin32${link_suf}"
    else
        echo "Warning Win32 not available on unix plattforms, ignoring request"
    fi;
fi;

img_libs_path=
img_incs_path=
img_libs=
img_defs=
sys_defs=

if test "$lib_System" = "yes"; then
    opensg_libs="$opensg_libs ${link_pre}OSGSystem${link_suf}"
    system_libs="$system_libs $sys_libs"
    img_libs_path=$image_libs_path
    img_incs_path=$image_incs_path
    img_libs=$image_libs
    img_defs=$image_defs
    sys_defs=$system_defs
fi;

if test "$lib_Base" = "yes"; then
    opensg_libs="$opensg_libs ${link_pre}OSGBase${link_suf}"
    system_libs="$system_libs $base_libs"
fi;

if test "$echo_lflags" = "yes"; then

    opensg_lib_path=${linkdir_pre}${exec_prefix}/lib/${lib_suf}${linkdir_suf}

    echo $link_flags $img_libs_path $system_libs_path $opensg_lib_path

fi      

if test "$echo_libs" = "yes"; then

    opensg_lib_path=${linkdir_pre}${exec_prefix}/lib/${lib_suf}${linkdir_suf}

    echo $link_flags $img_libs_path $system_libs_path $opensg_lib_path $opensg_libs $img_libs $system_libs

fi      

if test "$echo_cflags" = "yes"; then

    opensg_inc_path=${incdir_pre}${prefix}/include${incdir_suf}

    echo $sys_cflags $sys_defs $img_defs $img_incs_path $system_incs_path $opensg_inc_path

fi




